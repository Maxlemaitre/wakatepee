$(document).ready(function() {
  $('input[type="checkbox"]').click(function() {
    var project_id = $(this).data("project-id");
    var milestone_id = $(this).data("milestone-id");
    var sub_milestone_id = $(this).attr("id");
    if ($(this).is(':checked')) {
      var done = true;
    } else {
      var done = false;
    }
    $.ajax({
      type: 'PATCH',
      url: "/projects/" + project_id + "/sub_milestones/" + sub_milestone_id,
      data: {id: sub_milestone_id, done: done},
      success: function(data, textStatus, jqXHR) {
        $("#milestone-progress-" + milestone_id).html(data);
      }
    })
  });
});
